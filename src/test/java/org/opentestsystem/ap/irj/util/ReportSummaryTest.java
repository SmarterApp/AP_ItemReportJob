package org.opentestsystem.ap.irj.util;

import java.util.HashMap;
import java.util.Map;

import freemarker.template.Configuration;
import freemarker.template.TemplateExceptionHandler;
import org.junit.Before;
import org.junit.Test;
import org.opentestsystem.ap.common.assembler.StringAssembler;
import org.opentestsystem.ap.irj.model.ReportSummary;

import static org.opentestsystem.ap.irj.service.ItemReportManager.REPORT_TEMPLATE;

public class ReportSummaryTest {

    private ReportSummary summary = new ReportSummary();

    private Configuration freemarker;

    private StringAssembler assembler;

    @Before
    public void setup() {
        freemarker = new Configuration(Configuration.VERSION_2_3_25);
        freemarker.setClassForTemplateLoading(this.getClass(), "/report_templates");
        freemarker.setTemplateExceptionHandler(TemplateExceptionHandler.RETHROW_HANDLER);
        freemarker.setDefaultEncoding("UTF-8");

        assembler = new StringAssembler(freemarker);
    }

    @Test
    public void test() {
        final Map<String, Object> input = new HashMap<>();

        final String report = assembler.generate(REPORT_TEMPLATE, input);
        System.out.println(report);
    }
}
