package org.opentestsystem.ap.irj.model;

import lombok.Getter;
import org.opentestsystem.ap.common.model.*;
import org.opentestsystem.ap.irj.util.ReportUtil;

import java.util.List;

public class HtqsItemReport extends AbstractAssessmentItemReport<HtqsItem> {

    private final HtqsItemCore core;

    public HtqsItemReport(final HtqsItem item, final String reportStatus, final List<ValidationResult> validationResults) {
        super(item, reportStatus, validationResults);
        core = item.getCore();
    }

    @Override
    public String getItemContent() {
        final HtqsItemReport.Content content = new HtqsItemReport.Content(core);
        return ReportUtil.toJsonString(content);
    }

    @Getter
    private static class Content {

        private final String prompt;

        private final HtqSelectable htqSelectable;

        private Content(final HtqsItemCore core) {
            prompt = core.getEn().getPrompt();
            htqSelectable = core.getEn().getHtqSelectable();
        }
    }
}
